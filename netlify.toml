[build.environment]
HUGO_VERSION = "0.143.1"
NODE_VERSION = "22"
TZ = "America/Arizona"

[build]
publish = "public"
command = """
echo "üîç Netlify Build Environment Debug: "
echo "  NETLIFY_CONTEXT: $NETLIFY_CONTEXT"
echo "  ENVIRONMENT: $ENVIRONMENT"
echo "  CONTEXT: $CONTEXT"
echo "  NODE_ENV: $NODE_ENV"
echo "  HUGO_ENV: $HUGO_ENV"
echo "  NETLIFY_SITE_NAME: $NETLIFY_SITE_NAME"
echo "  NETLIFY_SITE_ID: $NETLIFY_SITE_ID"
echo "  All Netlify environment variables:"
env | grep -i netlify | sort
echo ""
if [ "$ENVIRONMENT" = "stage" ]; then
  echo "üéØ Running stage build command..."
  pnpm run build:stage
else
  echo "üéØ Running production build command..."
  pnpm run build:prod
fi
"""

# Stage-specific build configuration
[context.stage]
command = "pnpm run build:stage"
environment = { ENVIRONMENT = "stage" }

# Production-specific build configuration  
[context.production]
command = "pnpm run build:prod"
environment = { ENVIRONMENT = "production" }

# Deploy preview (for pull requests)
[context.deploy-preview]
command = "pnpm run build:stage"
environment = { ENVIRONMENT = "stage" } 
