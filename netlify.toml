[build.environment]
HUGO_VERSION = "0.143.1"
NODE_VERSION = "22"
TZ = "America/Arizona"

[build]
publish = "public"
command = """
if [ "$NETLIFY_CONTEXT" = "stage" ] || [ "$ENVIRONMENT" = "stage" ]; then
  pnpm run build:stage
else
  pnpm run build:prod
fi
"""

# Dynamic build command based on environment

# Stage-specific build configuration
[context.stage]
command = "pnpm run build:stage"
environment = { ENVIRONMENT = "stage" }

# Production-specific build configuration  
[context.production]
command = "pnpm run build:prod"
environment = { ENVIRONMENT = "production" }

# Deploy preview (for pull requests)
[context.deploy-preview]
command = "pnpm run build:stage"
environment = { ENVIRONMENT = "stage" } 
